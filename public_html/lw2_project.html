<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="./css/main.css">

  <title>CS354: Programming Languages (Spring 2021) - Team Perch</title>
</head>

<body>
  <div class="jumbotron text-left">
    <img src="assets/ruby.png" height="100">
    <h5>CS 354: Programming Languages (Spring 2021)</h5>
  </div>
  <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <a class="navbar-brand" href="#">Team Perch</a>
    <ul class="navbar-nav">
      <li class="navbar-item"><a class="nav-link" href="index.html">Home&nbsp;&nbsp;|</a></li>
      <li class="navbar-item"><a class="nav-link" href="documentation.html">Documentation&nbsp;&nbsp;|</a></li>
      <li class="navbar-item"><a class="nav-link" href="installation.html">Installation&nbsp;&nbsp;|</a></li>
      <li class="navbar-item"><a class="nav-link" href="comparisons.html">Language Comparisons&nbsp;&nbsp;|</a></li>
      <li class="navbar-item"><a class="nav-link" href="examples.html">Code Examples&nbsp;&nbsp;|</a></li>
      <li class="navbar-item"><a class="nav-link" href="lw2_project.html">LW2 Project</a></li>
    </ul>
  </nav>
  <div class="container" style="margin-top:30px">
    <h3>LW2 Project</h3>
    <h3>LW2 Code</h3>
    <h5>ReadCSV.rb</h5>
    <code class="code-example">
  # Author(s): Nicolas Dupuis, Ben Davies, Nathan Maroko, Ryan Rickerl
  # Date: 4/19/2021
  # Desc: Select and Parse a csv file
  require 'csv'
  require './Item'
  
  class ReadCSV
      #CSV file to read our shopping cart or inventory should be with the following headers: name, price, quantity
  
      puts "Enter a filename for your csv: "
      filename = gets.chomp
  
      # Check file for existence and readability
      if File.exists?(filename)
          if ! File.readable?(filename)
              puts "ERROR:: file '#{filename}' is not readable. Exiting"
              exit
          end
      else
          puts "ERROR:: file '#{filename}' does not exist. Exiting"
          exit
      end
  
      # create variables to store the references to column indexes
      @nameIdx = nil
      @priceIdx = nil
      @quantityIdx = nil
  
      # read CSV file into an array
      data = CSV.read(filename)
  
      # feader
      colNames = data.shift()
  
      for i in 0..colNames.length
          colId = colNames[i].to_s            # convert to string for comparison
  
          if colId.casecmp?("name")           # ignorecase compare for "name"
              @nameIdx = i
          elsif colId.casecmp?("price")       # ignorecase compare for "price"
              @priceIdx = i
          elsif colId.casecmp?("quantity")    # ignorecase compare for "quantity"
              @quantityIdx = i
          end
      end
  
      if !(@nameIdx and @priceIdx and @quantityIdx)
          puts "The provided CSV file is formatted incorrectly."
          puts "Please include the following headers: name, price, quantity."
          exit
      end
  
      @itemList = []      # create an array to store the Items 
  
      for row in data
          name = row[@nameIdx]
          price = row[@priceIdx].to_f
          quantity = row[@quantityIdx].to_i
  
          item = Item.new(name, price, quantity)
  
          @itemList << item
      end
      
      @total = 0
      # print itemList
      for item in @itemList
          quantity = item.getQuantity
          price = item.getPrice
          @total += quantity * price
          puts item.toString
      end
  
      printf "\nTotal Inventory Worth: $%.2f\n", @total
  
      # returns the total price of the item(s) as a string
      #def print_file_data()
      #    for i in 0..(itemList.length)
      #        puts itemList.toString()
      #    end
      #end
  
      #aggregates the data from the file to combine duplicate items into a single field
      #def AggregateItems()
      #    aggregatedItems = []
      #
      #    for i in 0..(itemList.length)
      #        for j in 0..(itemList.length)
      #            if((i != j) && (itemList[i].getName == itemList[j].getName))
      #                newQuantity = itemList[i].getQuantity + itemList[j].getQuantity
      #                newPrice = itemList[i].getPrice + itemList[j].getPrice
      #                newName = itemList[i].getName
      #                aggregatedItems << Item.initialize(newName, newPrice, newQuantity)
      #            end
      #        end
      #    end
      #end
  end
    </code>
    <br>
    <h5>Item.rb</h5>
    <code class="code-example">
  # Author(s): Nicolas Dupuis, Ben Davies, Nathan Maroko, Ryan Rickerl
  # Date: 4/15/2021
  # Desc: Defines an Item object that stores a name, price, and quantity
  
  class Item
    # Constructor method (uses initialize)
    def initialize(name, price, quantity)
      if quantity < 0 
        puts("ERROR:: quantity must be greater than 0. Exiting")
        exit
      end
  
      @name = name
      @price = price
      @quantity = quantity
    end
  
    def getQuantity()
      return @quantity
    end
  
    def setQuantity(quantity)
      @quantity = quantity
    end
  
    def getPrice()
      return @price
    end
  
    def setPrice(price)
      @price = price
    end
  
    def getName()
      return @name
    end
  
    def setName(name)
      @name = name
    end
  
    def toString()
      return sprintf("%4i : %-50s : %5.2f", @quantity, @name, @price)
    end  
    
    def compare(item)
        @name == item.name
    end
  end
    </code>
    <br>
  </div> <!-- container -->
</body>
</html>
